<!DOCTYPE html>
<html lang="ja">

<head>

  <meta charset="UTF-8">
  <!--[if IE]>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <![endif]-->
  <meta name="viewport" content="target-densitydpi=device-dpi, width=980, maximum-scale=1.0, user-scalable=yes">
  <meta name="description" content="DESCRIPTION">
  <meta name="keywords" content="KEYWORDS">
  <meta name="author" content="Seino">

  <title>TITLE</title>

  <link rel="stylesheet" href="css/common.css" media='all'>
  <!--[if lt IE 9]>
    <script src="javascripts/html5shiv.min.js"></script>
  <![endif]-->
  <script src="js/lib/jquery.min.js"></script>
  <script src="js/lib/fabric.min.js"></script>
  <link rel="shortcut icon" href="">
  <!--
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="icon" sizes="196x196" href="">
    <link rel="apple-touch-icon" sizes="152x152" href="">
  -->

</head>

<body id="index">

  <div class="container">

    <header class="header clearfix" id="page-top">
      <h1>

      </h1>
    </header>

    <div class="contents">
      <main class="content-main">
      </main><!--/content-main-->
    </div><!--/contents-->

  </div>
  <!--/container-->

</body>
<script>
  // (function(){
    var $canvas = $('<canvas id="demoCanvas" width="1000" height="600"></canvas>').appendTo('main'),
        canvas = new fabric.Canvas($canvas[0]);

    // 矩形オブジェクトを作る
    var rect = new fabric.Rect({
      left: 100,
      top: 100,
      fill: '#fbf5eb',
      width: 200,
      height: 200,
      padding: 3,
      borderColor: 'rgba(0, 0, 255, 0.3)',
      cornerColor: 'rgba(0, 0, 255, 0.3)',
      cornerSize: 8,
      transparentCorners: false,
      shadow: {
        color: 'rgba(0, 0, 0, 0.3)',
        blur: 1,
        offsetX: 3,
        offsetY: 3
      }
    });

    function animate(e, dir, callback) {
      if (e.target) {
        fabric.util.animate({
          startValue: e.target.get('scaleX'),
          endValue: e.target.get('scaleX') + (dir ? 0.05 : -0.05),
          duration: 80,
          onChange: function(value) {
            e.target.scale(value);
            canvas.renderAll();
          },
          onComplete: function() {
            e.target.setCoords();
            if(callback) callback(e);
          }
        });

        fabric.util.animate({
          'shadow.offsetX': dir ? 20 : 0.00001,
          'shadow.offsetY': dir ? 20 : 0.00001
        }, {
          duration: 80
      });
      }
    }

    canvas.on('mouse:down', function(e) { animate(e, 1, function(e){ animate(e, 0); }); });
    // canvas.on('mouse:up', function(e) { animate(e, 0); });

    // canvas 上に矩形を追加する
    canvas.add(rect);


    // canvas.selectionColor = 'rgba(255,0,0,1)';
    // canvas.selectionBorderColor = 'blue';
    // canvas.selectionLineWidth = 5;

    console.log(canvas);
  // })();
</script>

</html>
